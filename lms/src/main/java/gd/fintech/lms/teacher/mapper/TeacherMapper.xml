<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gd.fintech.lms.teacher.mapper.TeacherMapper">
	<!-- 강사 정보 입력 -->
	<insert id="insertTeacherFromQueue" parameterType="java.util.Map">
		INSERT INTO teacher(
            account_id,
            teacher_email,
            teacher_name,
            teacher_phone,
            teacher_gender,
            teacher_birth,
            teacher_address_main,
            teacher_address_sub,
            teacher_accessdate,
            teacher_updatedate,
            manager_id_access
        ) SELECT
            account_id,
            teacher_email,
            teacher_name,
            teacher_phone,
            teacher_gender,
            teacher_birth,
            teacher_address_main,
            teacher_address_sub,
            NOW(),
            NOW(),
            #{managerIdAccess}
            FROM teacher_queue
            WHERE account_id = #{accountId}
	</insert>
	<!-- 강사 정보 수정 -->
	<update id="updateTeacherInfo" parameterType="gd.fintech.lms.teacher.vo.Teacher">
		UPDATE teacher
			<set>
			<if test="teacherEmail !=null">teacher_email = #{teacherEmail},</if>
			<if test="teacherName !=null">teacher_name = #{teacherName},</if>
			<if test="teacherPhone !=null">teacher_phone = #{teacherPhone},</if>
			<if test="teacherGender !=null">teacher_gender = #{teacherGender},</if>
			<if test="teacherBirth !=null">teacher_birth = #{teacherBirth},</if>
			<if test="teacherAddressMain !=null">teacher_address_main = #{teacherAddressMain},</if>
			<if test="teacherAddressSub !=null">teacher_address_sub = #{teacherAddressSub},</if>
			<if test="teacherImage !=null">teacher_image = #{teacherImage},</if>
			<if test="teacherInfo !=null">teacher_info = #{teacherInfo}</if>
		</set>
		WHERE account_id = #{accountId}
	</update>
	<!-- 강사 정보 상세보기 -->
	<select id="selectTeacherOne" parameterType="String" resultType="gd.fintech.lms.teacher.vo.Teacher">
		SELECT 
			account_id accountId,
			teacher_email teacherEmail,
			teacher_name teacherName,
			teacher_phone teacherPhone,
			teacher_gender teacherGender,
			teacher_birth teacherBirth,
			teacher_address_main teacherAddressMain,
			teacher_address_sub teacherAddressSub,
			teacher_image teacherImage,
			teacher_info teacherInfo 
		FROM teacher 
		WHERE account_id = #{accountId}
	</select>
</mapper>